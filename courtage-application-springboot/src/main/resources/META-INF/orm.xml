<?xml version="1.0" encoding="UTF-8" ?>
<entity-mappings xmlns="https://jakarta.ee/xml/ns/persistence/orm" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                 xsi:schemaLocation="https://jakarta.ee/xml/ns/persistence/orm https://jakarta.ee/xml/ns/persistence/orm/orm_3_0.xsd"
                 version="3.0">
	<entity class="devoxx.lab.archihexa.courtage.domain.model.Portefeuille">
		<attributes>
			<id name="nom" access="FIELD"/>
			<basic name="quantite" access="FIELD" />
			<element-collection name="actions" target-class="java.lang.Integer" access="FIELD">
				<map-key-column name="action"/>
				<column name="nombre"/>
				<collection-table>
					<join-column name="portefeuille_nom"/>
				</collection-table>
			</element-collection>
		</attributes>
	</entity>
	<entity class="devoxx.lab.archihexa.courtage.application.springboot.adapters.persistence.VuePortefeuille" name="VuePortefeuille">
		<named-native-query name="myQuery" >
			<query><![CDATA[
            select p.nom, sum(a.nombre) as quantite from portefeuille p
                left join actions a where a.portefeuille_nom = p.nom
                group by p.nom
            ]]></query>
		</named-native-query>
	</entity>

</entity-mappings>
